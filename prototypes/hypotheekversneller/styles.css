:root{
  --ink:#111827; --muted:#6b7280; --sand:#F3EFED; --bg:#fff; --card:#ffffff; --border:#e5e7eb; --orange:#ea650d; --lightOrange:#FFEDD9; --purple:#F0EFF6;
  --brand:#404040; --brand-dark:#2b2b2b; --good:#538B4C; --bad:#7f1d1d; --warn:#92400e; --focus:#93c5fd;
  --principal: var(--purple); --interest: var(--orange); --saved: var(--good);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,"Helvetica Neue",sans-serif;
  background:var(--bg);
  color:var(--ink);
}
[hidden]{display:none !important}

/* ===== Header ===== */
header{background:var(--bg);color:var(--ink);padding:16px 0 12px;border-bottom:1px solid var(--border)}
.header-wrap{padding:0 20px}
h1{margin:24px 0 24px 0;font-size:24px}
.wrap{max-width:1100px;margin:0 auto;padding:20px}
.prop-intro {font-size: 20px; line-height: 1.4;}

/* Header meta chips (alleen stap 2 zichtbaar) */
.header-meta{display:flex;flex-wrap:wrap;gap:8px 10px;align-items:center;color:#d1d5db;font-size:13px}
.header-meta .chip{background:var(--border);color:var(--muted);border:1px solid rgba(255,255,255,.18);padding:4px 10px;border-radius:999px;font-weight:600}
.header-meta .spacer{flex:1 0 auto}
.btn-mini{border:1px solid rgba(255,255,255,.35);color:#e5e7eb;padding:6px 10px;border-radius:4px;font-size:12px;background:transparent}
.btn-mini:hover{background:rgba(255,255,255,.08)}

/* ===== Buttons (algemeen) ===== */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:16px 16px;border-radius:4px;border:1px solid transparent;font-weight:600;cursor:pointer;line-height:1;background:transparent;color:inherit}
.btn-primary{background:var(--brand);color:#fff;border-color:var(--brand);padding:16px 16px;border-radius:4px}
.btn-primary:hover{background:var(--brand-dark);border-color:var(--brand-dark)}
.btn-ghost{background:transparent;color:var(--brand);border:1px solid var(--brand)}
.btn-ghost:hover{border: 1px solid var(--orange);box-shadow:0 2px 5px 0 rgba(65,65,65,.23);}



/* ===== Forms & layout ===== */
label{font-size:16px;display:block;margin-bottom:12px;color:var(--ink)}
input[type="number"]{padding:12px;font-size:16px;width:100%;border:1px solid var(--border);border-radius:4px;background:var(--card);color:var(--ink)}
input[type="number"]:focus{outline:none;border-color:var(--focus);box-shadow:0 0 0 3px rgba(147,197,253,.35)}
.field{min-width:240px}
.controls{display:flex;flex-wrap:wrap;gap:16px;align-items:flex-end;margin-bottom:24px;}

.step{margin-bottom:28px}
.hero{padding:12px 0 8px}
.hero-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
.col-4{grid-column:span 4}
.col-12{grid-column:span 12}
.actions{margin-top:16px;display:flex;gap:12px}
.errors{margin-top:8px;color:#b91c1c;font-size:14px}
.step1-intro{margin-bottom: 48px;}

/* Titels */
.section-title{margin:0 0 16px;font-size:20px;font-weight:700;letter-spacing:.01em}

/* ===== Strategy blok ===== */
.strategy{margin:48px 0;padding:8px 0}
.help{font-size:16px;color:var(--muted);margin:6px 0 16px;line-height:1.5}

/* Toggle AAN/UIT – primair bij UIT, subtiel/ghost bij AAN */
.cta-toggle{
  display:inline-flex;align-items:center;justify-content:center;gap:10px;
  font-size:16px;font-weight:700;padding:14px 18px;border-radius:4px;border:2px solid var(--brand);
  cursor:pointer;margin:0 0 8px;
  transition:transform .12s ease,background-color .15s ease,color .15s ease,border-color .15s ease,box-shadow .15s ease
}
.cta-toggle:focus{outline:none;box-shadow:0 0 0 4px rgba(253, 205, 147, 0.35)}
/* UIT (false) = primaire */
.cta-toggle[aria-pressed="false"]{background:var(--brand);color:#fff;border-color:var(--brand)}
.cta-toggle[aria-pressed="false"]:hover{background:var(--brand-dark);border-color:var(--brand-dark)}
/* AAN (true) = subtiel */
.cta-toggle[aria-pressed="true"]{background:#fff;color:var(--brand);border-color:var(--border)}
.cta-toggle[aria-pressed="true"]:hover{border-color:#cbd5e1;background:#f8fafc}

/* Segmented controls zoals voorheen */
.seg{display:flex;gap:8px;flex-wrap:wrap}
.seg button{
  padding:8px 12px;border-radius:4px;border:1px solid var(--border);
  background:#fff;cursor:pointer;font-size:16px;color:var(--ink);
  transition:transform .15s ease,background-color .15s ease,border-color .15s ease
}
.seg button:active{transform:scale(.98)}
.seg button[aria-pressed="true"]{background:var(--brand);color:#fff;border-color:var(--brand)}
.seg button:hover {border:1px solid var(--orange);}

/* Versneller controls: gedimd + blur bij UIT (zichtbaar, niet klikbaar) */
#strategyControls{margin-top:24px; transition: filter .22s ease, opacity .22s ease;}
#strategyControls.is-disabled{
  opacity:.45;
  filter:blur(1.2px);
  pointer-events:none;
}

/* ===== Tabel ===== */
h2.table-title{margin:32px 0 24px 0;font-size:18px}
table{
  width:100%;border-collapse:collapse;margin-top:8px;background:var(--card);
  border:1px solid var(--border);border-radius:8px;overflow:hidden
}
thead th{background:#f3f4f6;text-align:left;padding:12px;font-size:14px;color:var(--muted)}
thead th.year{width:80px;text-align:center}
thead th.num{text-align:right}
tbody td{padding:10px;border-top:1px solid var(--border);font-size:14px}
tbody tr:hover td{background:#f0f2f5}
td.year{text-align:center;color:var(--ink)}
.num{text-align:right}
.dash{color:var(--muted);text-align:right}

/* === Besparingsgrafiek === */
.card.chart-card{
  position: relative;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px 14px 10px;
}

.legend{ display:flex; gap:8px; flex-wrap:wrap; margin:10px 2px 4px; }
.legend .chip{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px; font-size:12px; font-weight:600;
  border:1px solid var(--border); background:#fff; color:var(--ink);
}
.legend .chip.lg{ font-size:13px; padding:7px 12px; }
.legend .principal::before,
.legend .interest::before,
.legend .saved::before{
  content:""; width:12px; height:12px; border-radius:2px; display:inline-block;
}
.legend .principal::before{ background:var(--principal); }
.legend .interest::before{ background:var(--interest); }
.legend .saved::before{ background:var(--saved); }


/* === Twee-koloms layout voor samenvatting + tabel === */
.summary-grid {
  display: block;            /* standaard: stapelen */
}

@media (min-width: 1024px) {
  .summary-grid {
    display: grid;
    grid-template-columns: 1fr 2fr;  /* 1/3 (grafiek) vs 2/3 (tabel) */
    gap: 16px;
    align-items: start;
  }
}
 
/* === Gestapelde layout: grafiek boven, tabel onder === */
/* Standaard: alles onder elkaar */
.summary,
#summary,
#chartCard {
  width: 100%;
}

/* Op grotere schermen: grafiek mag smaller (≈ 1/3 van de container) */
@media (min-width: 1024px) {
  #chartCard {
    /* 1/3 van de inhoudscontainer (de .wrap), met een ondergrens voor leesbaarheid */
    max-width: 50%;
    min-width: 320px;            /* voorkom te smal bij grote schermen */
  }

  /* (Optioneel) laat de grafiekkaart meescrollen als de tabel hoog is */
  #chartCard {
    position: sticky;
    top: 12px;
  }
}

/* Kleine marge onder de samenvatting zodat de tabel lucht krijgt */
#summary {
  margin-bottom: 16px;
}

/* === Compact overzicht jaarlijkse kosten (collapsing) === */
.schedule-wrap {
  position: relative;
  margin-top: 8px;
}

/* Teaser-rijen (jaar 4–6) iets vervaagd/gedimd */
tbody tr.is-teaser td {
  opacity: 0.55;
}

/* Rijen die verborgen zijn bij ingeklapte weergave (jaar 7+) */
tbody tr.is-hidden {
  display: none;
}

/* Fade-overlay aan onderzijde van de tabel in ingeklapte toestand */
.schedule-wrap.is-collapsed::after {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  /* Laat ruimte voor de actieknop onder de tabel */
  bottom: 52px;              /* stemt overeen met knophoogte + marge */
  height: 72px;              /* hoogte van de fade */
  pointer-events: none;
  /* Gradient van transparant naar achtergrondkleur van de pagina */
  background: linear-gradient(
    to bottom,
    rgba(249, 250, 251, 0) 0%,       /* var(--bg) ≈ #f9fafb transparant */
    rgba(249, 250, 251, 0.9) 55%,
    rgba(249, 250, 251, 1) 100%
  );
}

/* Container voor de actieknop onder de tabel */
.schedule-actions {
  display: flex;
  justify-content: center;
  padding-top: 8px;
  padding-bottom: 4px;
}

/* Knopstijl: gebruik je bestaande knopsystematiek */
#toggleAllYearsBtn.btn-ghost {
  font-size: 14px;
  padding: 8px 12px;
  border-radius: 10px;
}

/* (Optioneel) micro-animatie bij uitklappen */
.table-expand {
  animation: tableExpand 220ms ease-out;
}
@keyframes tableExpand {
  from { opacity: .0; transform: translateY(-4px); }
  to   { opacity: 1;  transform: translateY(0); }
}


/* === Maandlasten-vergelijker (onder besparingssamenvatting) === */
.compare-card{
  background: var(--card,#fff);
  border: 1px solid var(--border,#e5e7eb);
  border-radius: 12px;
  padding: 12px 14px;
  margin-top: 12px;
}
.compare-grid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  align-items: start;
}
.compare-block{
  background: #fff;
  border: 1px solid var(--border,#e5e7eb);
  border-radius: 10px;
  padding: 12px 12px 10px;
}
.compare-top{
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}
.compare-label{
  font-weight: 800;
  letter-spacing: .01em;
}
.compare-sub{
  color: var(--muted,#6b7280);
  font-size: 12px;
  margin-top: 2px;
}
.compare-value{
  font-weight: 800;
  font-size: 22px;
  line-height: 1.25;
  margin-top: 2px;
}

.compare-delta {
  margin-top: 16px;
  margin-bottom: 16px;

}

.arrow-btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 8px;
  border: 1px solid var(--border,#e5e7eb);
  background: #fff;
  color: var(--ink,#111827);
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}
.arrow-btn:hover{ background:#f8fafc; }
.arrow-btn:disabled{
  opacity: .45;
  cursor: not-allowed;
  background: #f9fafb;
}

/* === Layout: summary chart + compare naast elkaar op brede schermen === */
@media (min-width: 1024px) {
  /* Maak van de summary-sectie een 2-koloms grid */
  #summary {
    display: grid;
    grid-template-columns: minmax(320px, 1fr) minmax(320px, 1fr);
    grid-template-areas:
      "title  title"
      "chart  compare";
    gap: 16px 16px; /* rij- en kolomafstand */
    align-items: start;
  }

  /* Titel over beide kolommen */
  #summary .section-title {
    grid-area: title;
    margin-bottom: 4px; /* iets compacter */
  }

  /* Plaats de twee kaarten in aparte kolommen */
  #summary #chartCard   { grid-area: chart; }
  #summary #compareCard { grid-area: compare; }

  /* Als je eerder een max-width:33% op #chartCard had gezet, reset die hier */
  #summary #chartCard {
    max-width: none;   /* laat grid de breedte bepalen */
    position: static;  /* sticky-optie uit; haal dit weg als je sticky wilt houden */
  }
}

/* === Compare-monthlies · Sparkline === */
.cmp-sparkline {
  margin-top: 10px;
  padding: 8px 10px 6px;
  border: 1px dashed var(--border, #e5e7eb);
  border-radius: 10px;
  background: #fff;
}
.cmp-sparkline svg {
  width: 100%;
  height: 60px;     /* compacte hoogte; pas vrij aan */
  display: block;
}
.cmp-sparkline .area {
  fill: var(--lightOrange);            /* zacht vlak onder lijn */
}
.cmp-sparkline .line {
  fill: none;
  stroke: var(--orange);
  stroke-width: 2;
}
.cmp-sparkline .dot {
  fill: #fff;
  stroke: var(--orange, #2563eb);
  stroke-width: 2;
}
.cmp-sparkline .dot.selected {
  stroke: var(--orange, #1d4ed8);
  stroke-width: 2.6;
}
.cmp-sparkline .dot.last {
  stroke: var(--orange, #065f46);
  stroke-width: 2.6;
}

/* (optioneel) subtiele labels onder/naast de sparkline */
.cmp-sparkline .x-axis {
  fill: var(--muted, #6b7280);
  font-size: 11px;
}

/* Compare-monthlies · actiezone & knopvariant (sluit aan op bestaande .btn-styles) */
#compareCard .compare-actions{
  display: flex;
  justify-content: center;
  gap: 8px;
  padding-top: 8px;
}

/* Extra haakje voor de knop (variant wisselt JS-matig tussen btn-ghost/btn-primary) */
#compareCard .cmp-accel-btn{
  /* rely on .btn base styles; optioneel marges hier */
  min-width: 240px;           /* net wat rustiger in de layout */
}

/* Op small: full-width knoppen werken vaak beter */
@media (max-width: 560px){
  #compareCard .cmp-accel-btn{
    width: 100%;
  }
}

/* Startjaar select – compacter en consistent */
.field--startyear {
  min-width: unset;   /* override van .field { min-width:240px } */
  width: auto;
}

.startyear-select {
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  padding: 8px 10px;
  font-size: 14px;
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--card);
  color: var(--ink);
  min-width: 140px;
  max-width: 160px;   /* compacter dan inputs */
  cursor: pointer;
  background-image:
    linear-gradient(45deg, transparent 50%, var(--muted) 50%),
    linear-gradient(135deg, var(--muted) 50%, transparent 50%),
    linear-gradient(to right, transparent, transparent);
  background-position:
    calc(100% - 18px) calc(50% - 3px),
    calc(100% - 12px) calc(50% - 3px),
    calc(100% - 2.5em) 0;
  background-size:
    6px 6px,
    6px 6px,
    1px 100%;
  background-repeat: no-repeat;
}
.startyear-select:focus {
  outline: none;
  border-color: var(--focus);
  box-shadow: 0 0 0 3px rgba(147,197,253,.35);
}

/* === Summary Chart styles (geen JS-injectie) === */

/* As & algemene rendering */
#interestChart .axis { stroke: var(--border, #e5e7eb); stroke-width: .5; }
#interestChart .bar  { shape-rendering: crispEdges; }

/* KLEUREN (jouw wens) */
#interestChart .bar-principal { fill: #CDCCE4; }  /* Aflossing */
#interestChart .bar-interest  { fill: #EA650D; }  /* Rente */
#interestChart .bar-saved     { fill: var(--good, #16a34a); } /* Bespaarde rente (groen) */

/* Rente-animatie (krimp) */
#interestChart .gInterest{
  transform-box: fill-box;
  transform-origin: center bottom;
  transition: transform 420ms ease;
}

/* Groene blokje: soepele hoogte-/Y-transitie */
#interestChart .bar-saved{
  transition: y 360ms ease, height 360ms ease;
}

/* Label "Bespaarde rente" rechts van de balk */
#interestChart .saved-line   { stroke: var(--good, #065f46); stroke-width: 2; stroke-dasharray: 3 3; }
#interestChart .saved-bubble { fill: var(--good, #065f46); opacity: .98; }
#interestChart .saved-text   {
  fill: #fff; font-weight: 700; font-size: 13.5px;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, "Helvetica Neue", sans-serif;
  text-anchor: middle;
}

/* Zichtbaarheid van het label */
#interestChart .hidden { opacity: 0; transition: opacity 240ms ease; pointer-events: none; visibility: hidden; }
#interestChart .visible{ opacity: 1; transition: opacity 240ms ease; visibility: visible; }

/* Responsief: stapel onder elkaar op small screens */
@media (max-width: 560px){
  .compare-grid{ grid-template-columns: 1fr; }
}

/* ===== Animations ===== */
@keyframes bump{0%{transform:scale(1)}45%{transform:scale(1.04)}100%{transform:scale(1)}}
.anim-bump{animation:bump 260ms ease-out}
@media (prefers-reduced-motion:reduce){*{animation:none !important;transition:none !important}}